# Deployment Guide

## Production Deployment

### Using Docker

1. Build the Docker image:
   ```bash
   docker build -t api-app .
   ```

2. Run with environment variables:
   ```bash
   docker run -p 8000:8000 --env-file .env api-app
   ```

### Using Docker Compose

1. Configure production environment variables in `.env`

2. Start services:
   ```bash
   docker-compose -f docker-compose.prod.yml up -d
   ```

### Kubernetes Deployment

1. Create ConfigMap for environment variables:
   ```bash
   kubectl create configmap api-config --from-env-file=.env
   ```

2. Apply deployment:
   ```bash
   kubectl apply -f k8s/deployment.yaml
   ```

3. Apply service:
   ```bash
   kubectl apply -f k8s/service.yaml
   ```

## Environment Variables

See `.env.example` for all required environment variables.

## Database Migrations

Run migrations before deploying new versions:
```bash
alembic upgrade head
```

## Monitoring

- Health check endpoint: `/health`
- Metrics endpoint: `/metrics`
- Logs are written to stdout/stderr

## Scaling

### Horizontal Scaling

The application is stateless and can be scaled horizontally:

```bash
kubectl scale deployment api-app --replicas=5
```

### Database Connection Pooling

Configure connection pool settings in `DATABASE_URL`:
```
postgresql://user:password@host/db?pool_size=20&max_overflow=40
```

## Security Considerations

1. Always use HTTPS in production
2. Keep SECRET_KEY secure and rotate regularly
3. Use strong database passwords
4. Enable rate limiting
5. Keep dependencies updated

---
Generated by AI Developer Agent
